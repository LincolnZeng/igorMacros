#pragma rtGlobals=1		// Use modern global access method.Function ButtonProc_Loaddata(ctrlName) : ButtonControl//"Load BNL Data in Folder"	String ctrlName	execute "setDataFolder Root:"	Execute "Makegraphtable()"		Execute "LoadDataalltypes()"	Execute "Initialize_Global_Variables()"	EndFunction ButtonProc_ConvertAllData(ctrlName) : ButtonControl//"Convert All Data"	String ctrlName	Execute "ConvtAll()"EndFunction ButtonProc_ConvertSingleData(ctrlName) : ButtonControl//"Convert Single Data"	String ctrlName	Execute "ConvtOne()"EndFunction Center_detector(matname)	Wave matname	PauseUpdate;Silent 1	Setscale/P x,-(dimsize(matname,0)-1)*dimdelta(matname,0)/2,dimdelta(matname,0),""matnameEndMacro Load_Wisconsin_TableData(Wavebase, DataSetStartNum)	String WaveBase="Sr_"	Variable DataSetStartNum=1	Prompt DataSetStartNum, "From Which Number and Above,\rDefault is 1"	silent 1; pauseupdate	String tempPath, FL, PathName	NewPath/o tempPath	PathName="tempPath"		Variable Loadn=ItemsInList(IndexedFile($PathName,-1,".DAT"))	print LoadN	String FileName	Variable index=DataSetStartNum		Do		FileName=IndexedFile($PathName, index-1, ".DAT")		print FileName		Load_Wisconsin_Table_Onegroup(PATHName, FileName, waveBase+num2istr(index)+"_", 0, index)		index+=1	while( index<=LoadN )	EndMacro Load_Wisconsin_Table_Onegroup(PATHName, FileName, waveBase, startNum, groupNum)	String FileName="", WaveBase="Data_"	String PathName="tempPath"	Variable startNum=nan, groupNum=nan	Silent 1; pauseUpdate		if( 0==cmpstr(FileName,""))		NewPath /Q/O $PathName		LoadWave /Q/J/L={0,0,1,0,0} /K=2  /O /N=tempStr /P=$PATHName 		LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName s_FileName		LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName s_FileName		else		LoadWave /Q/J/L={0,0,1,0,0} /K=2  /O /N=tempStr /P=$PATHName FileName		LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName      FileName		LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName 		   FileName			endif		setscale /I x, xWave0[0], xwave0[inf],"", tempMat0		String /G StringName="StringofGroup"+num2istr(groupNum)	string /G $stringname=tempStr0[0]		Matrix_To_Wave("tempMat0",  Wavebase, startNum, "Root:")		String  WavenameList="Info_Wave;Comments;BeamCur;X_Base;Y_base;x_start_Wave;Start_wave;Last_wave;Offset_wave;Bias_wave;Theta;Phi;T_K;Source"	String  WaveTypeList="text;text;var;text;text;var;var;var;var;var;var;var;var;text"	String  ValueList	sprintf ValueList, "%s;%s;%d;%s;%s;%d;%d;%d;%d;%d;%d;%d;%d;%s", S_FileName, "", 1,"Dummy",  WaveBase,0,0,root:gv_NumofWaves-1,0,0,0,0,0, stringName		AppendOneRecord_2002(WavenameList,WaveTypeList, ValueList)	EndProc LoadDataalltypes()	Silent 1;	PauseUpdate	Variable/G typeofdata	If(typeofdata==1)		LoadDataFromIgorFiles()	Endif	If(typeofdata==2)		LoadDataFromtxt()	Endif	If(typeofdata==3)		LoadDataFromdat()	Endif							If(typeofdata==4)		LoadDataFromA1()	Endif	EndProc LoadDataFromIgorFiles()	Silent 1;PauseUpdate	newpath /O tempPath	String Pathname="tempPath"	Variable  Loadn=ItemsInList(IndexedFile($PathName,-1,".pxt"))   //number of pxt files in the folder	Variable  DataNum    //number of files loaded	String  savedDataFolder=getDataFolder(1)	String 	Filename, FolderName	Variable n,j	Variable index	String objName	if(wintype("Information_table")==0)		DataNum=0	endif		if(winType("Information_table")==2)		DataNum=Dimsize(File_Name,0)	endif		j=loadn-DataNum+1	InSertPoints DataNum, j,File_Name	string mat	n=DataNum	Do		Filename=IndexedFile($PathName,n-1,".pxt")		print FileName		LoadData /T/O/L=1/P=$PathName Filename						File_Name[n]=FileName		ConvtOneProc(n-1)//		mat="data"+num2str(n)    //is this necessary??????????????????????????????????		n+=1		While(n<=Loadn)		setDataFolder $savedDataFolderEndProc LoadDataFromdat()	Silent 1;PauseUpdate	newpath /O tempPath	String Pathname="tempPath"	Variable  Loadn=ItemsInList(IndexedFile($PathName,-1,".dat"))	print IndexedFile($PathName,-1,".dat")	Variable  DataNum	String  savedDataFolder=getDataFolder(1)	String 	Filename, FolderName	String kstring	Variable condition	Variable n,m	Variable index	Variable firstnumfirst,firstnumlast,secondnumfirst,secondnumlast,i	String objName		if(  0==wintype("Information_table"))		DataNum=0	endif			if(  2==winType("Information_table"))		DataNum=Dimsize(File_Name,0)	endif				m=loadn-DataNum+1		InSertPoints DataNum, m,File_Name	string mat	n=DataNum	Do		Filename=IndexedFile($PathName,n-1,".dat")		print FileName		File_Name[n]=FileName		LoadWave /Q/J/L={0,0,1,0,0} /K=2  /O /N=tempStr /P=$PATHName Filename		LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName FileName			LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName FileName							//		ConvtOneProc(n-1)		mat="data"+num2str(n)		Make/O/N=(dimsize(tempMat0,1),dimsize(tempMat0,0)) $mat		$mat[][]=tempMat0[q][p]		Setscale/P y,XWave0[0],XWave0[1]-XWave0[0],""$mat		kstring=tempStr0[0]		condition=0		i=0		//Finding the first number		Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))				firstnumfirst=i				condition=1						Else					i+=1			Endif					While(condition!=1)		//Finding the end of the first number		condition=0		i=firstnumfirst+1				Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))				i+=1				Else					firstnumlast=i-1					condition=1					Endif					While(condition!=1)		print firstnumlast,kstring[firstnumfirst,firstnumlast]		//Finding the second number		condition=0		i=firstnumlast+1				Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))				secondnumfirst=i				condition=1						Else					i+=1			Endif					While(condition!=1)		//Finding the end of the second number		condition=0		i=secondnumfirst+1				Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))				i+=1				Else					secondnumlast=i-1					condition=1					Endif					While(condition!=1)		print secondnumlast,kstring[secondnumfirst,secondnumlast]			Setscale/P x,str2num(kstring[firstnumfirst,firstnumlast]),str2num(kstring[secondnumfirst,secondnumlast])-str2num(kstring[firstnumfirst,firstnumlast]),""$mat			Center_detector($mat)						n+=1		While(n<=Loadn)			setDataFolder $savedDataFolderEndProc LoadDataFromtxt()	Silent 1;PauseUpdate	newpath /O tempPath	String Pathname="tempPath"	Variable  Loadn=ItemsInList(IndexedFile($PathName,-1,".txt"))	print IndexedFile($PathName,-1,".txt")	Variable  DataNum	String  savedDataFolder=getDataFolder(1)	String 	Filename, FolderName	String kstring	Variable condition	Variable n,m	Variable index	Variable firstnumfirst,firstnumlast,secondnumfirst,secondnumlast,i	String objName		if(  0==wintype("Information_table"))		DataNum=0	endif			if(  2==winType("Information_table"))		DataNum=Dimsize(File_Name,0)	endif				m=loadn-DataNum+1		InSertPoints DataNum, m,File_Name	string mat	n=DataNum	Do		Filename=IndexedFile($PathName,n-1,".txt")		print FileName		File_Name[n]=FileName		LoadWave /Q/J/L={0,11,1,0,0} /K=2  /O /N=tempStr /P=$PATHName Filename		LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName FileName			LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName FileName							//		ConvtOneProc(n-1)		mat="data"+num2str(n)		Make/O/N=(dimsize(tempMat0,1),dimsize(tempMat0,0)) $mat		$mat[][]=tempMat0[q][p]		Setscale/P y,XWave0[0],XWave0[1]-XWave0[0],""$mat		kstring=tempStr0[0]		condition=0		i=15		//Finding the first number		Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))				firstnumfirst=i				condition=1						Else					i+=1			Endif					While(condition!=1)		//Finding the end of the first number		condition=0		i=firstnumfirst+1				Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))				i+=1				Else					firstnumlast=i-1					condition=1					Endif					While(condition!=1)		print firstnumlast,kstring[firstnumfirst,firstnumlast]		//Finding the second number		condition=0		i=firstnumlast+1				Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))				secondnumfirst=i				condition=1						Else					i+=1			Endif					While(condition!=1)		//Finding the end of the second number		condition=0		i=secondnumfirst+1				Do			if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))				i+=1				Else					secondnumlast=i-1					condition=1					Endif					While(condition!=1)		print secondnumlast,kstring[secondnumfirst,secondnumlast]			Setscale/P x,str2num(kstring[firstnumfirst,firstnumlast]),str2num(kstring[secondnumfirst,secondnumlast])-str2num(kstring[firstnumfirst,firstnumlast]),""$mat			Center_detector($mat)						n+=1		While(n<=Loadn)			setDataFolder $savedDataFolderEndProc LoadDataFromA1()	Silent 1;PauseUpdate	newpath /O tempPath	String Pathname="tempPath"	Variable  Loadn=ItemsInList(IndexedFile($PathName,-1,".txt"))	print IndexedFile($PathName,-1,".txt")	Variable  DataNum	String  savedDataFolder=getDataFolder(1)	String 	Filename, FolderName	String kstring	Variable condition	Variable n,m	Variable index	Variable firstnumfirst,firstnumlast,secondnumfirst,secondnumlast,i	String objName		if(wintype("Information_table")==0)		DataNum=0	endif		if(winType("Information_table")==2)		DataNum=Dimsize(File_Name,0)	endif		m=loadn-DataNum+1		InSertPoints DataNum, m,File_Name	string mat	n=DataNum	Do		Filename=IndexedFile($PathName,n-1,".txt")		print FileName		File_Name[n]=FileName		LoadWave /Q/J/L={0,0,1,0,0} /K=2  /O /N=tempStr /P=$PATHName Filename		LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName FileName			LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName FileName									mat="data"+num2str(n)		Make/O/N=(dimsize(tempMat0,1),dimsize(tempMat0,0)) $mat		$mat[][]=tempMat0[q][p]		Setscale/P y,XWave0[0],XWave0[1]-XWave0[0],""$mat		Center_detector($mat)//,0)		n+=1		While(n<=Loadn)			setDataFolder $savedDataFolderEndProc Initialize_Global_Variables()	Silent 1;	PauseUpdate	String SavedFolder=getDataFolder(1)	setDataFolder Root:		String    /G yybb	Variable /G gv_GroupNum	String 	 /G gv_EdcBase	Variable /G gv_EdcStart	Variable /G gv_EdcEnd	Variable /G gv_EdcOffset, gv_Delta_EdcOffset	Variable /G gv_EdcBias	String 	 /G gv_MdcBase	Variable /G gv_MdcStart	Variable /G gv_MdcEnd	Variable /G gv_MdcOffset,gv_Delta_EdcOffset	Variable /G gv_MdcBias	String    /G gv_MatName//	Variable /G gv_Delta_YBase	Variable /G gv_PopUpNum, gv_SignleWaveNum	Variable /G gv_Percentage	Variable /G gv_yBase	Variable /G gv_DividenBy, gv_SignleWaveNum	Variable /G gv_Tk, gv_Theta,gv_Phi	Variable /G gv_NumOfWaves=nan	String /G msg	String/G gv_WaveType//	Variable/G gv_SymmetryLineVertical//	Variable/G gv_SymmetryLineHorizontal	String/G gv_MatName	String/G gv_Vertical	String/G gv_Horizontal	Variable/G gv_SingleWaveNum	setdataFolder  savedFolderEnd//Proc ConvtOne()//	pauseupdate//	silent 1//	ConvtOneProc(gv_groupnum-1)//EndProc ConvtOne()	pauseupdate	silent 1	Variable/G typeofdata	If(typeofdata==1)		ConvtOneProc(gv_groupnum-1)	Endif	If(typeofdata==2)		ConvtOneProctxt()	Endif		If(typeofdata==3)		ConvtOneProcdat()	Endif		If(typeofdata==4)		ConvtOneProcA1()	EndifEndProc ConvtOneProc(index)	Variable index	PauseUpdate	Silent 1	String objName,MatName,NewMat	objName=GetIndexedObjName(":",4,Index)	if(strlen(objName)==0)		Print "No File"	endif	SetDatafolder root:$objName	MatName=GetIndexedObjName(":",1,0)//	print MatName	Newmat="Data"+Num2Str(index+1)	Duplicate/O $MatName,root:$NewMat	SetDataFolder root:	MatrixTranspose $NewMat	Make/O/N=(dimsize($NewMat,0),dimsize($NewMat,1)) tempmat1	Setscale/P x,dimoffset($NewMat,0),dimdelta($NewMat,0),""tempmat1	Setscale/P y,dimoffset($NewMat,1),dimdelta($NewMat,1),""tempmat1	tempmat1[][]=$NewMat[p][q]	Duplicate/O tempmat1 $NewMat	Center_detector($NewMat)	Killwaves  tempmat1EndProc ConvtOneProcA1()	PauseUpdate	Silent 1	String Pathname="tempPath"//	Variable  DataNum	String  savedDataFolder=getDataFolder(1)	String 	Filename, FolderName//	String kstring//	Variable condition//	Variable n,m//	Variable index//	Variable firstnumfirst,firstnumlast,secondnumfirst,secondnumlast,i//	String objName		string mat	FileName=File_Name[gv_groupnum]	LoadWave /Q/J/L={0,0,1,0,0} /K=2  /O /N=tempStr /P=$PATHName FileName	LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName FileName 	LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName FileName							mat="data"+num2str(gv_groupnum)	Make/O/N=(dimsize(tempMat0,1),dimsize(tempMat0,0)) $mat	$mat[][]=tempMat0[q][p]	Setscale/P y,XWave0[0],XWave0[1]-XWave0[0],""$mat	If(global_cspacing>0)		Setscale/P x,dimoffset($mat,0),global_cspacing,""$mat			Endif	setDataFolder $savedDataFolder	Center_detector($mat)	Killwaves XWave0EndProc ConvtOneProcdat()	PauseUpdate	Silent 1	String Pathname="tempPath"	Variable  DataNum	String  savedDataFolder=getDataFolder(1)	String 	Filename, FolderName	String kstring	Variable condition	Variable n,m	Variable index	Variable firstnumfirst,firstnumlast,secondnumfirst,secondnumlast,i	string mat	FileName=File_Name[gv_groupnum]	LoadWave /Q/J/L={0,0,1,0,0} /K=2  /O /N=tempStr /P=$PATHName Filename	LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName FileName		LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName FileName								mat="data"+num2str(gv_groupnum)	Make/O/N=(dimsize(tempMat0,1),dimsize(tempMat0,0)) $mat	$mat[][]=tempMat0[q][p]	Setscale/P y,XWave0[0],XWave0[1]-XWave0[0],""$mat	kstring=tempStr0[0]	condition=0	i=0	//Finding the first number	Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))			firstnumfirst=i			condition=1					Else				i+=1		Endif				While(condition!=1)	//Finding the end of the first number	condition=0	i=firstnumfirst+1			Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))			i+=1			Else				firstnumlast=i-1				condition=1				Endif				While(condition!=1)	print firstnumlast,kstring[firstnumfirst,firstnumlast]	//Finding the second number	condition=0	i=firstnumlast+1			Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))			secondnumfirst=i			condition=1					Else				i+=1		Endif				While(condition!=1)	//Finding the end of the second number	condition=0	i=secondnumfirst+1			Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))			i+=1			Else				secondnumlast=i-1				condition=1				Endif				While(condition!=1)	print secondnumlast,kstring[secondnumfirst,secondnumlast]		Setscale/P x,str2num(kstring[firstnumfirst,firstnumlast]),str2num(kstring[secondnumfirst,secondnumlast])-str2num(kstring[firstnumfirst,firstnumlast]),""$mat						setDataFolder $savedDataFolder	Center_detector($mat)EndProc ConvtOneProctxt()	PauseUpdate	Silent 1	String Pathname="tempPath"	Variable  DataNum	String  savedDataFolder=getDataFolder(1)	String 	Filename, FolderName	String kstring	Variable condition//	Variable n,m	Variable index	Variable firstnumfirst,firstnumlast,secondnumfirst,secondnumlast,i	string mat	FileName=File_Name[gv_groupnum]	LoadWave /Q/J/L={0,11,1,0,0} /K=2  /O /N=tempStr /P=$PATHName Filename	LoadWave /Q/G/L={0,1,0,1,0} /O /M/N=tempMat /P=$PATHName FileName		LoadWave /Q/G/L={0,1,0,0,1} /O /N=XWave /P=$PATHName FileName								mat="data"+num2str(GV_GroupNum)	Make/O/N=(dimsize(tempMat0,1),dimsize(tempMat0,0)) $mat	$mat[][]=tempMat0[q][p]	Setscale/P y,XWave0[0],XWave0[1]-XWave0[0],""$mat	kstring=tempStr0[0]	condition=0	i=15	//Finding the first number. 	Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))			firstnumfirst=i			condition=1					Else				i+=1		Endif				While(condition!=1)	//Finding the end of the first number	condition=0	i=firstnumfirst+1			Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))			i+=1			Else				firstnumlast=i-1				condition=1				Endif				While(condition!=1)	print firstnumlast,kstring[firstnumfirst,firstnumlast]	//Finding the second number	condition=0	i=firstnumlast+1			Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr("-",kstring[i])==0))			secondnumfirst=i			condition=1					Else				i+=1		Endif				While(condition!=1)	//Finding the end of the second number	condition=0	i=secondnumfirst+1			Do		if((mod(Round(str2num(kstring[i])),1)==0)||(cmpstr(".",kstring[i])==0))			i+=1			Else				secondnumlast=i-1				condition=1				Endif				While(condition!=1)	print secondnumlast,kstring[secondnumfirst,secondnumlast]		print mat	Setscale/P x,str2num(kstring[firstnumfirst,firstnumlast]),str2num(kstring[secondnumfirst,secondnumlast])-str2num(kstring[firstnumfirst,firstnumlast]),""$mat						setDataFolder $savedDataFolder	Center_detector($mat)EndProc ConvtAll()	PauseUpdate	Silent 1	Variable/G typeofdata	If(typeofdata==1)		ConvtAllpxt()	Endif	If(typeofdata==2)		ConvtAlltxt()	Endif	If(typeofdata==3)		ConvtAlldat()	Endif	If(typeofdata==4)		ConvtAllA1()	EndifEndProc Convtindexes()	PauseUpdate	Silent 1	Variable i	i=0	Do		gv_groupNum=imageindex[i]		ConvtOne()		i+=1	While(i<dimsize(imageindex,0))EndProc ConvtAllA1()	PauseUpdate	Silent 1	Variable i	i=1	Do		gv_groupNum=i		ConvtOneProcA1()				i+=1	While(i<dimsize(File_name,0))EndProc ConvtAlldat()	PauseUpdate	Silent 1	Variable i	i=1	Do		gv_GroupNum=i		ConvtOneProcdat()				i+=1	While(i<dimsize(File_name,0))EndProc ConvtAlltxt()	PauseUpdate	Silent 1	Variable i	i=1	Do		gv_GroupNum=i		ConvtOneProctxt()				i+=1	While(i<dimsize(File_name,0))EndProc ConvtAllpxt()	PauseUpdate	Silent 1	Variable index=0	String objName,MatName,NewMat	do		objName=GetIndexedObjName(":",4,Index)		if(strlen(objName)==0)			break		endif		SetDatafolder root:$objName		MatName=GetIndexedObjName(":",1,0)		print MatName		Newmat="Data"+Num2Str(index+1)		Duplicate/O $MatName,root:$NewMat		SetDataFolder root:		MatrixTranspose $NewMat		Make/O/N=(dimsize($NewMat,0),dimsize($NewMat,1)) tempmat1		Setscale/P x,dimoffset($NewMat,0),dimdelta($NewMat,0),""tempmat1		Setscale/P y,dimoffset($NewMat,1),dimdelta($NewMat,1),""tempmat1			tempmat1[][]=$NewMat[p][q]		Duplicate/O tempmat1 $NewMat		Center_detector($NewMat)		Killwaves  tempmat1		//		print objName		index+=1	While(1)	End//*********************************STM**********************************************************Proc LoadSTM_csv()	Pauseupdate	Silent 1	String Pathname="tempPath"	String thisdir,Pathdir,fullname,thisstring	Variable num_of_lines,num_of_columns	Variable i,j	newpath/O tempPath	pathdir="fullname"	num_of_lines=ItemsInList(Indexeddir($PathName,-1,0))	i=0	Do		print i,"/",num_of_lines-1		pathinfo/S temppath		if(i<10)			newpath/C/O/Q $pathdir S_path+"line00"+num2str(i)+":" 		Endif		if((i>9)&&(i<100)))			newpath/C/O/Q $pathdir S_path+"line0"+num2str(i)+":" 		Endif		if(i>99)			newpath/C/O/Q $pathdir S_path+"line"+num2str(i)+":" 		Endif						If(i==0)			num_of_columns=ItemsInList(Indexedfile($pathdir,-1,".csv"))		Endif		j=0		Do			pathinfo/S fullname					thisstring= S_path+Indexedfile($pathdir,j,".csv")			LoadWave/J/D/A=thistempw/Q/P=home/K=1 thisstring			Deletepoints 0,2, thistempw0			Deletepoints 0,2, thistempw1						sort thistempw0,thistempw0,thistempw1				If((i==0)&&(j==0))				Make/O/N=(num_of_lines,dimsize(thistempw1,0),num_of_columns) Mat_IV				Setscale/I y,thistempw0[0],thistempw0[dimsize(thistempw0,0)-1],""Mat_IV			Endif			Mat_IV[i][][j]=thistempw1[q]			killwaves thistempw0,thistempw1			j+=1		While(j<num_of_columns)		i+=1	While(i<num_of_lines)End